{"ast":null,"code":"var _jsxFileName = \"/Users/Philipp/code/phiele/cavelius-art/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport Navbar from \"./Navbar.js\";\nimport Home from \"./Home.js\";\nimport About from \"./About.js\";\nimport Products from \"./Products.js\";\nimport ProductDetails from \"./ProductDetails.js\";\nimport Cart from \"./Cart.js\";\nimport useFetch from \"./useFetch.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const {\n    get\n  } = useFetch(\"https://cavelius-art-api.herokuapp.com/api/v1/\"); // fetch products from rails API\n\n  const getAPIdata = request => {\n    get(request).then(data => {\n      console.log(data);\n      setProducts(data);\n    }).catch(error => console.log(`Could not load ${request}`, error)).finally(() => {\n      console.log(`${request} loaded`);\n    });\n  };\n\n  useEffect(() => {\n    getAPIdata(\"products.json\");\n  }, []); // save cart items to local storage\n\n  const [cart, setCart] = useState(function () {\n    let savedCart = [];\n\n    try {\n      savedCart = JSON.parse(localStorage.getItem(\"cart\")) || [];\n    } catch (error) {\n      savedCart = [];\n    }\n\n    return savedCart;\n  });\n  useEffect(() => {\n    if (cart) {\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n    }\n  }, [cart]); // handle products in cart\n\n  function handleProductDelete(id) {\n    const updatedCart = cart.filter(product => product.id !== id);\n    setCart(updatedCart);\n  }\n\n  function handleProductMinus(existingProduct) {\n    if (existingProduct.quantity > 1) {\n      // decrease quantity\n      const updatedCart = cart.map(product => {\n        if (product.id === existingProduct.id) {\n          return { ...product,\n            quantity: product.quantity - 1\n          };\n        }\n\n        return product;\n      });\n      setCart(updatedCart);\n    } else {\n      // product is new to the cart\n      handleProductDelete(existingProduct.id);\n    }\n  }\n\n  function handleProductPlus(newProduct) {\n    // check if item exists\n    const existingProduct = cart.find(product => product.id === newProduct.id);\n\n    if (existingProduct) {\n      // increase quantity\n      const updatedCart = cart.map(product => {\n        if (product.id === newProduct.id) {\n          return { ...product,\n            quantity: product.quantity + 1\n          };\n        }\n\n        return product;\n      });\n      setCart(updatedCart);\n    } else {\n      // product is new to the cart\n      setCart([...cart, { ...newProduct,\n        quantity: 1\n      }]);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(HashRouter, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      cart: cart\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/about\",\n          children: /*#__PURE__*/_jsxDEV(About, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/products\",\n          children: /*#__PURE__*/_jsxDEV(Products, {\n            products: products,\n            cart: cart,\n            onProductPlus: handleProductPlus,\n            onProductDelete: handleProductDelete\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/products/:id\",\n          children: /*#__PURE__*/_jsxDEV(ProductDetails, {\n            products: products,\n            onProductPlus: handleProductPlus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/cart\",\n          children: /*#__PURE__*/_jsxDEV(Cart, {\n            cart: cart,\n            onProductPlus: handleProductPlus,\n            onProductMinus: handleProductMinus,\n            onProductDelete: handleProductDelete\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"aJWvhk6aLVeWlYzu8mKv2X60ALc=\", false, function () {\n  return [useFetch];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/Philipp/code/phiele/cavelius-art/src/App.js"],"names":["useState","useEffect","HashRouter","Switch","Route","Navbar","Home","About","Products","ProductDetails","Cart","useFetch","App","products","setProducts","get","getAPIdata","request","then","data","console","log","catch","error","finally","cart","setCart","savedCart","JSON","parse","localStorage","getItem","setItem","stringify","handleProductDelete","id","updatedCart","filter","product","handleProductMinus","existingProduct","quantity","map","handleProductPlus","newProduct","find"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,KAA7B,QAA0C,kBAA1C;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,KAAP,MAAkB,YAAlB;AACA,OAAOC,QAAP,MAAqB,eAArB;AACA,OAAOC,cAAP,MAA2B,qBAA3B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,QAAP,MAAqB,eAArB;;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM;AAAEe,IAAAA;AAAF,MAAUJ,QAAQ,CACtB,gDADsB,CAAxB,CAFa,CAMb;;AACA,QAAMK,UAAU,GAAIC,OAAD,IAAa;AAC9BF,IAAAA,GAAG,CAACE,OAAD,CAAH,CACGC,IADH,CACSC,IAAD,IAAU;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAL,MAAAA,WAAW,CAACK,IAAD,CAAX;AACD,KAJH,EAKGG,KALH,CAKUC,KAAD,IAAWH,OAAO,CAACC,GAAR,CAAa,kBAAiBJ,OAAQ,EAAtC,EAAyCM,KAAzC,CALpB,EAMGC,OANH,CAMW,MAAM;AAACJ,MAAAA,OAAO,CAACC,GAAR,CAAa,GAAEJ,OAAQ,SAAvB;AAAiC,KANnD;AAOD,GARD;;AAUAhB,EAAAA,SAAS,CAAC,MAAM;AACde,IAAAA,UAAU,CAAC,eAAD,CAAV;AACD,GAFQ,EAEN,EAFM,CAAT,CAjBa,CAqBb;;AACA,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAkB1B,QAAQ,CAAC,YAAY;AAC3C,QAAI2B,SAAS,GAAG,EAAhB;;AACA,QAAI;AACFA,MAAAA,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,KAA4C,EAAxD;AACD,KAFD,CAEE,OAAOR,KAAP,EAAc;AACdI,MAAAA,SAAS,GAAG,EAAZ;AACD;;AACD,WAAOA,SAAP;AACD,GAR+B,CAAhC;AAUA1B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIwB,IAAJ,EAAU;AACRK,MAAAA,YAAY,CAACE,OAAb,CAAqB,MAArB,EAA6BJ,IAAI,CAACK,SAAL,CAAeR,IAAf,CAA7B;AACD;AACF,GAJQ,EAIN,CAACA,IAAD,CAJM,CAAT,CAhCa,CAsCb;;AACA,WAASS,mBAAT,CAA6BC,EAA7B,EAAiC;AAC/B,UAAMC,WAAW,GAAGX,IAAI,CAACY,MAAL,CAAaC,OAAD,IAAaA,OAAO,CAACH,EAAR,KAAeA,EAAxC,CAApB;AACAT,IAAAA,OAAO,CAACU,WAAD,CAAP;AACD;;AAED,WAASG,kBAAT,CAA4BC,eAA5B,EAA6C;AAC3C,QAAIA,eAAe,CAACC,QAAhB,GAA2B,CAA/B,EAAkC;AAChC;AACA,YAAML,WAAW,GAAGX,IAAI,CAACiB,GAAL,CAAUJ,OAAD,IAAa;AACxC,YAAIA,OAAO,CAACH,EAAR,KAAeK,eAAe,CAACL,EAAnC,EAAuC;AACrC,iBAAO,EACL,GAAGG,OADE;AAELG,YAAAA,QAAQ,EAAEH,OAAO,CAACG,QAAR,GAAmB;AAFxB,WAAP;AAID;;AACD,eAAOH,OAAP;AACD,OARmB,CAApB;AASAZ,MAAAA,OAAO,CAACU,WAAD,CAAP;AACD,KAZD,MAYO;AACL;AACAF,MAAAA,mBAAmB,CAACM,eAAe,CAACL,EAAjB,CAAnB;AACD;AACF;;AAED,WAASQ,iBAAT,CAA2BC,UAA3B,EAAuC;AACrC;AACA,UAAMJ,eAAe,GAAGf,IAAI,CAACoB,IAAL,CACrBP,OAAD,IAAaA,OAAO,CAACH,EAAR,KAAeS,UAAU,CAACT,EADjB,CAAxB;;AAGA,QAAIK,eAAJ,EAAqB;AACnB;AACA,YAAMJ,WAAW,GAAGX,IAAI,CAACiB,GAAL,CAAUJ,OAAD,IAAa;AACxC,YAAIA,OAAO,CAACH,EAAR,KAAeS,UAAU,CAACT,EAA9B,EAAkC;AAChC,iBAAO,EACL,GAAGG,OADE;AAELG,YAAAA,QAAQ,EAAEH,OAAO,CAACG,QAAR,GAAmB;AAFxB,WAAP;AAID;;AACD,eAAOH,OAAP;AACD,OARmB,CAApB;AASAZ,MAAAA,OAAO,CAACU,WAAD,CAAP;AACD,KAZD,MAYO;AACL;AACAV,MAAAA,OAAO,CAAC,CACN,GAAGD,IADG,EAEN,EACE,GAAGmB,UADL;AAEEH,QAAAA,QAAQ,EAAE;AAFZ,OAFM,CAAD,CAAP;AAOD;AACF;;AAGD,sBACE,QAAC,UAAD;AAAA,4BACE,QAAC,MAAD;AAAQ,MAAA,IAAI,EAAEhB;AAAd;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,6BACE,QAAC,MAAD;AAAA,gCACE,QAAC,KAAD;AAAO,UAAA,KAAK,MAAZ;AAAa,UAAA,IAAI,EAAC,GAAlB;AAAA,iCACE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE,QAAC,KAAD;AAAO,UAAA,KAAK,MAAZ;AAAa,UAAA,IAAI,EAAC,QAAlB;AAAA,iCACE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAJF,eAOE,QAAC,KAAD;AAAO,UAAA,KAAK,MAAZ;AAAa,UAAA,IAAI,EAAC,WAAlB;AAAA,iCACE,QAAC,QAAD;AACE,YAAA,QAAQ,EAAEZ,QADZ;AAEE,YAAA,IAAI,EAAEY,IAFR;AAGE,YAAA,aAAa,EAAEkB,iBAHjB;AAIE,YAAA,eAAe,EAAET;AAJnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAPF,eAeE,QAAC,KAAD;AAAO,UAAA,IAAI,EAAC,eAAZ;AAAA,iCACE,QAAC,cAAD;AACE,YAAA,QAAQ,EAAErB,QADZ;AAEE,YAAA,aAAa,EAAE8B;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAfF,eAqBE,QAAC,KAAD;AAAO,UAAA,KAAK,MAAZ;AAAa,UAAA,IAAI,EAAC,OAAlB;AAAA,iCACE,QAAC,IAAD;AACE,YAAA,IAAI,EAAElB,IADR;AAEE,YAAA,aAAa,EAAEkB,iBAFjB;AAGE,YAAA,cAAc,EAAEJ,kBAHlB;AAIE,YAAA,eAAe,EAAEL;AAJnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBArBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAqCD;;GAlIQtB,G;UAESD,Q;;;KAFTC,G;AAoIT,eAAeA,GAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { HashRouter, Switch, Route } from \"react-router-dom\";\nimport Navbar from \"./Navbar.js\";\nimport Home from \"./Home.js\";\nimport About from \"./About.js\";\nimport Products from \"./Products.js\";\nimport ProductDetails from \"./ProductDetails.js\";\nimport Cart from \"./Cart.js\";\nimport useFetch from \"./useFetch.js\";\n\nfunction App() {\n  const [products, setProducts] = useState([]);\n  const { get } = useFetch(\n    \"https://cavelius-art-api.herokuapp.com/api/v1/\"\n  );\n\n  // fetch products from rails API\n  const getAPIdata = (request) => {\n    get(request)\n      .then((data) => {\n        console.log(data)\n        setProducts(data);\n      })\n      .catch((error) => console.log(`Could not load ${request}`, error))\n      .finally(() => {console.log(`${request} loaded`)});\n  }\n\n  useEffect(() => {\n    getAPIdata(\"products.json\")\n  }, []);\n\n  // save cart items to local storage\n  const [cart, setCart] = useState(function () {\n    let savedCart = [];\n    try {\n      savedCart = JSON.parse(localStorage.getItem(\"cart\")) || [];\n    } catch (error) {\n      savedCart = [];\n    }\n    return savedCart;\n  });\n\n  useEffect(() => {\n    if (cart) {\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n    }\n  }, [cart]);\n\n  // handle products in cart\n  function handleProductDelete(id) {\n    const updatedCart = cart.filter((product) => product.id !== id);\n    setCart(updatedCart);\n  }\n\n  function handleProductMinus(existingProduct) {\n    if (existingProduct.quantity > 1) {\n      // decrease quantity\n      const updatedCart = cart.map((product) => {\n        if (product.id === existingProduct.id) {\n          return {\n            ...product,\n            quantity: product.quantity - 1,\n          };\n        }\n        return product;\n      });\n      setCart(updatedCart);\n    } else {\n      // product is new to the cart\n      handleProductDelete(existingProduct.id)\n    }\n  }\n\n  function handleProductPlus(newProduct) {\n    // check if item exists\n    const existingProduct = cart.find(\n      (product) => product.id === newProduct.id\n    );\n    if (existingProduct) {\n      // increase quantity\n      const updatedCart = cart.map((product) => {\n        if (product.id === newProduct.id) {\n          return {\n            ...product,\n            quantity: product.quantity + 1,\n          };\n        }\n        return product;\n      });\n      setCart(updatedCart);\n    } else {\n      // product is new to the cart\n      setCart([\n        ...cart,\n        {\n          ...newProduct,\n          quantity: 1,\n        },\n      ]);\n    }\n  }\n\n\n  return (\n    <HashRouter>\n      <Navbar cart={cart} />\n      <div className=\"container\">\n        <Switch>\n          <Route exact path=\"/\">\n            <Home />\n          </Route>\n          <Route exact path=\"/about\">\n            <About />\n          </Route>\n          <Route exact path=\"/products\">\n            <Products\n              products={products}\n              cart={cart}\n              onProductPlus={handleProductPlus}\n              onProductDelete={handleProductDelete}\n            />\n          </Route>\n          <Route path=\"/products/:id\">\n            <ProductDetails\n              products={products}\n              onProductPlus={handleProductPlus}\n            />\n          </Route>\n          <Route exact path=\"/cart\">\n            <Cart\n              cart={cart}\n              onProductPlus={handleProductPlus}\n              onProductMinus={handleProductMinus}\n              onProductDelete={handleProductDelete}\n            />\n          </Route>\n        </Switch>\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}