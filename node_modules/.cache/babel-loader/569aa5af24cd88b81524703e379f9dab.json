{"ast":null,"code":"import{Link}from\"react-router-dom\";import{loadStripe}from\"@stripe/stripe-js\";import Button from\"./Button.js\";// TODO: Replace with your own publishable key\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var stripeLoadedPromise=loadStripe(\"pk_test_51LQtUyLacYG8sMVCpQIHpTdGa5JsE8ogoGplCN5gsepXCzSBRvF2wej4c8bKFXc6SxO39lUr9dcjIekZz1uzHsmS00Fi4NhbR3\");export default function Cart(props){var cart=props.cart,onProductPlus=props.onProductPlus,onProductMinus=props.onProductMinus,onProductDelete=props.onProductDelete;var totalPrice=cart.reduce(function(total,product){return total+product.price*product.quantity;},0);function handleFormSubmit(event){event.preventDefault();var lineItems=cart.map(function(product,i){return{price:product.price_id,quantity:product.quantity};});console.log(lineItems);var shippingCountries={allowedCountries:[\"US\",\"DE\",\"AT\",\"CH\",\"FR\",\"BE\",\"NL\",\"LU\",\"DK\",\"SE\",\"IT\",\"PL\"]};stripeLoadedPromise.then(function(stripe){stripe.redirectToCheckout({lineItems:lineItems,mode:\"payment\",successUrl:\"https://phiele.github.io/cavelius-art/cart\",cancelUrl:\"https://phiele.github.io/cavelius-art/cart\",shippingAddressCollection:shippingCountries}).then(function(response){// this will only log if the redirect did not work\nconsole.log(response.error);}).catch(function(error){// wrong API key? you will see the error message here\nconsole.log(error);});});}return/*#__PURE__*/_jsx(\"div\",{className:\"cart-layout\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Cart\"}),cart.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"You have not added any product to your cart yet.\"}),cart.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-products\",children:cart.map(function(product){return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-product\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-product-name\",children:[/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(product.id),children:/*#__PURE__*/_jsx(\"img\",{src:product.image,width:\"60\",height:\"60\",alt:\"\"})}),/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(product.id),children:product.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-product-quantity\",children:[\"Quantity:\",/*#__PURE__*/_jsx(Button,{className:\"btn-minus\",circle:true,onClick:function onClick(){return onProductMinus(product);},children:\"-\"}),/*#__PURE__*/_jsx(\"p\",{children:product.quantity}),/*#__PURE__*/_jsx(Button,{className:\"btn-plus\",circle:true,onClick:function onClick(){return onProductPlus(product);},children:\"+\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-product-total\",children:[\"\\u20AC\",product.price*product.quantity,/*#__PURE__*/_jsx(Button,{circle:true,className:\"btn-delete\",onClick:function onClick(){return onProductDelete(product.id);},children:\"\\xD7\"})]})]});})}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-total\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total-positions\",children:[\"TOTAL (incl. VAT): \\u20AC\",totalPrice]})}),/*#__PURE__*/_jsx(\"form\",{className:\"pay-form\",onSubmit:handleFormSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"pay-form-btn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pay-form-btn-placement\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Checkout\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"By clicking \\\"Checkout\\\" I approve the Terms and conditions and I agree to the Privacy policy.\"})]})})]})]})});}","map":{"version":3,"sources":["/Users/Philipp/code/phiele/cavelius-art/src/Cart.js"],"names":["Link","loadStripe","Button","stripeLoadedPromise","Cart","props","cart","onProductPlus","onProductMinus","onProductDelete","totalPrice","reduce","total","product","price","quantity","handleFormSubmit","event","preventDefault","lineItems","map","i","price_id","console","log","shippingCountries","allowedCountries","then","stripe","redirectToCheckout","mode","successUrl","cancelUrl","shippingAddressCollection","response","error","catch","length","id","image","name"],"mappings":"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","sourcesContent":["import { Link } from \"react-router-dom\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport Button from \"./Button.js\";\n\n// TODO: Replace with your own publishable key\nconst stripeLoadedPromise = loadStripe(\"pk_test_51LQtUyLacYG8sMVCpQIHpTdGa5JsE8ogoGplCN5gsepXCzSBRvF2wej4c8bKFXc6SxO39lUr9dcjIekZz1uzHsmS00Fi4NhbR3\");\n\nexport default function Cart(props) {\n  const { cart, onProductPlus, onProductMinus, onProductDelete } = props;\n\n\n  const totalPrice = cart.reduce(\n    (total, product) => total + product.price * product.quantity,\n    0\n  );\n\n  function handleFormSubmit(event) {\n    event.preventDefault();\n\n    const lineItems = cart.map((product, i) => {\n      return { price: product.price_id, quantity: product.quantity };\n    });\n\n    console.log(lineItems)\n\n    const shippingCountries = {\n      allowedCountries: [\"US\", \"DE\", \"AT\", \"CH\", \"FR\", \"BE\", \"NL\", \"LU\", \"DK\", \"SE\", \"IT\", \"PL\"]\n    };\n\n    stripeLoadedPromise.then((stripe) => {\n      stripe\n        .redirectToCheckout({\n          lineItems: lineItems,\n          mode: \"payment\",\n          successUrl: \"https://phiele.github.io/cavelius-art/cart\",\n          cancelUrl: \"https://phiele.github.io/cavelius-art/cart\",\n          shippingAddressCollection: shippingCountries\n        })\n        .then((response) => {\n          // this will only log if the redirect did not work\n          console.log(response.error);\n        })\n        .catch((error) => {\n          // wrong API key? you will see the error message here\n          console.log(error);\n        });\n    });\n  }\n\n  return (\n    <div className=\"cart-layout\">\n      <div className=\"cart\">\n        <h1>Your Cart</h1>\n        {cart.length === 0 && (\n          <p>You have not added any product to your cart yet.</p>\n        )}\n        {cart.length > 0 && (\n          <>\n            <div className=\"cart-products\">\n              {cart.map((product) => {\n                return (\n                  <div className=\"cart-product\">\n                    <div className=\"cart-product-name\">\n                      <Link to={`/products/${product.id}`}>\n                        <img\n                          src={product.image}\n                          width=\"60\"\n                          height=\"60\"\n                          alt=\"\"\n                        />\n                      </Link>\n                      <Link to={`/products/${product.id}`}>\n                        {product.name}\n                      </Link>\n                    </div>\n                    <div className=\"cart-product-quantity\">\n                      Quantity:\n                      <Button\n                        className=\"btn-minus\"\n                        circle\n                        onClick={() => onProductMinus(product)}\n                      >\n                        -\n                      </Button>\n                      <p>\n                        {product.quantity}\n                      </p>\n                      <Button\n                        className=\"btn-plus\"\n                        circle\n                        onClick={() => onProductPlus(product)}\n                      >\n                        +\n                      </Button>\n                    </div>\n                    <div className=\"cart-product-total\">\n                      €{product.price * product.quantity}\n                      <Button\n                        circle\n                        className=\"btn-delete\"\n                        onClick={() => onProductDelete(product.id)}\n                      >\n                        ×\n                      </Button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n            <div className=\"cart-total\">\n              {/* <div className=\"cart-coupon\">t</div> */}\n              <div className=\"cart-total-positions\">\n                TOTAL (incl. VAT): €{totalPrice}\n              </div>\n            </div>\n            <form className=\"pay-form\" onSubmit={handleFormSubmit}>\n              <div className=\"pay-form-btn\">\n                <div className=\"pay-form-btn-placement\">\n                  <Button type=\"submit\">Checkout</Button>\n                </div>\n                <p>\n                  By clicking \"Checkout\" I approve the Terms and conditions and I agree to the Privacy policy.\n                </p>\n              </div>\n            </form>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}